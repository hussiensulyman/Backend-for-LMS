{
  "info": {
    "name": "LMS Backend API",
    "description": "Postman collection synced to docs/API.md and docs/openapi.yaml. Auth and payments endpoints are rate limited.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.1.0"
  },
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:5000" },
    { "key": "token", "value": "" },
    { "key": "courseId", "value": "course-id" },
    { "key": "videoId", "value": "video-id" },
    { "key": "assignmentId", "value": "assignment-id" },
    { "key": "quizId", "value": "quiz-id" },
    { "key": "stripeSignature", "value": "t=timestamp,v1=signature" }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register (rate limited)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/register", "host": ["{{baseUrl}}"], "path": ["api","auth","register"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"secret\",\n  \"role\": \"student\"\n}"
            },
            "description": "20 requests / 15 minutes per IP"
          }
        },
        {
          "name": "Login (rate limited)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/auth/login", "host": ["{{baseUrl}}"], "path": ["api","auth","login"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"secret\"\n}"
            },
            "description": "20 requests / 15 minutes per IP"
          }
        }
      ]
    },
    {
      "name": "Courses",
      "item": [
        {
          "name": "List Courses",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/courses", "host": ["{{baseUrl}}"], "path": ["api","courses"] }
          }
        },
        {
          "name": "Create Course (admin|instructor)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/courses", "host": ["{{baseUrl}}"], "path": ["api","courses"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Course title\",\n  \"description\": \"Description\",\n  \"published\": true\n}"
            }
          }
        },
        {
          "name": "Enroll (student)",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "url": { "raw": "{{baseUrl}}/api/courses/enroll", "host": ["{{baseUrl}}"], "path": ["api","courses","enroll"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"courseId\": \"{{courseId}}\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Create Payment Intent (rate limited)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/payments/create-payment-intent", "host": ["{{baseUrl}}"], "path": ["api","payments","create-payment-intent"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 5000,\n  \"currency\": \"usd\"\n}"
            },
            "description": "amount must be a positive integer in the smallest currency unit"
          }
        },
        {
          "name": "Subscribe (rate limited)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/payments/subscribe", "host": ["{{baseUrl}}"], "path": ["api","payments","subscribe"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"priceId\": \"price_123\"\n}"
            },
            "description": "priceId is required"
          }
        },
        {
          "name": "Webhook (Stripe)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Stripe-Signature", "value": "{{stripeSignature}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/payments/webhook", "host": ["{{baseUrl}}"], "path": ["api","payments","webhook"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_test\",\n  \"type\": \"payment_intent.succeeded\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"pi_test\"\n    }\n  }\n}"
            },
            "description": "Requires raw body and Stripe-Signature header; returns { received: true, type }"
          }
        }
      ]
    },
    {
      "name": "Videos",
      "item": [
        {
          "name": "Create Video (admin|instructor)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/videos", "host": ["{{baseUrl}}"], "path": ["api","videos"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Video title\",\n  \"description\": \"Description\",\n  \"sourceUrl\": \"https://cdn.example.com/video.mp4\"\n}"
            }
          }
        },
        {
          "name": "Add Comment",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/videos/{{videoId}}/comments", "host": ["{{baseUrl}}"], "path": ["api","videos","{{videoId}}","comments"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Great point!\",\n  \"timestamp\": 120000\n}"
            },
            "description": "text required; timestamp optional but must be a non-negative integer if provided"
          }
        },
        {
          "name": "List Comments",
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/api/videos/{{videoId}}/comments", "host": ["{{baseUrl}}"], "path": ["api","videos","{{videoId}}","comments"] }
          }
        }
      ]
    },
    {
      "name": "Assignments",
      "item": [
        {
          "name": "Create Assignment (admin|instructor)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/assignments", "host": ["{{baseUrl}}"], "path": ["api","assignments"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course\": \"{{courseId}}\",\n  \"title\": \"Homework 1\",\n  \"description\": \"Do the thing\"\n}"
            },
            "description": "course and title are required"
          }
        },
        {
          "name": "Submit Assignment (student)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/assignments/{{assignmentId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","assignments","{{assignmentId}}","submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"file\": \"https://cdn.example.com/submission.pdf\"\n}"
            }
          }
        },
        {
          "name": "List Assignments",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{token}}" } ],
            "url": { "raw": "{{baseUrl}}/api/assignments?course={{courseId}}", "host": ["{{baseUrl}}"], "path": ["api","assignments"], "query": [ { "key": "course", "value": "{{courseId}}" } ] }
          }
        }
      ]
    },
    {
      "name": "Quizzes",
      "item": [
        {
          "name": "Create Quiz (admin|instructor)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/quizzes/{{courseId}}/quizzes", "host": ["{{baseUrl}}"], "path": ["api","quizzes","{{courseId}}","quizzes"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"questions\": [\n    {\n      \"question\": \"2+2?\",\n      \"options\": [\"3\", \"4\", \"5\"],\n      \"correctAnswer\": \"4\"\n    }\n  ],\n  \"duration\": 300\n}"
            },
            "description": "questions must be a non-empty array"
          }
        },
        {
          "name": "Submit Quiz (student)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": { "raw": "{{baseUrl}}/api/quizzes/{{quizId}}/submit", "host": ["{{baseUrl}}"], "path": ["api","quizzes","{{quizId}}","submit"] },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"answers\": [\"4\"]\n}"
            },
            "description": "answers must be an array"
          }
        }
      ]
    }
  ]
}
